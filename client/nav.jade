template(name='topnav')
    // .ui.attached.borderless.large.inverted.topnav.menu(style="background:#{ct.primary_color}")
    .ui.attached.borderless.inverted.topnav.labeled.icon.menu(style="background:#{ct.primary_color}")
        if is_loading
            .icon.item
                i.loading.refresh.large.icon
        else 
            a.item.icon.toggle_leftbar(href='#')
                // +ioffice name='menu'
                i.bars.icon
        if ct.color_icon_header
            a.header.tribe_schemas.item(href="/t/#{ct.slug}/s/schema" class="{{isActivePath '/'}}")
                +icolor name=ct.color_icon
        if ct.logo_id
            if ct.logo_header
                a.tribe_schemas.item(href="/t/#{ct.slug}/s/schema" class="{{isActivePath '/'}}")
                    img.ui.tiny.image(src="{{c.url ct.logo_id}}")
        if ct.title_header
            // if is_dev
            a.ui.header.tribe_schemas.item(href="/t/#{ct.slug}/s/schema" class="{{isActivePath '/'}}")
                strong #{ct.title}
            // else 
            //     a.ui.header.tribe_schemas.item(href="/t/#{ct.slug}/menu" class="{{isActivePath '/'}}")
            //         strong #{ct.title}
        // each topnav_schemas
        //     a.item.mobile_hidden.set_tribe_schema(href="/t/#{tribe}/s/#{slug}" class="{{#if is_loading}}disabled{{/if}}" title="{{#unless show_label}} {{title}} {{/unless}}")
        //         if color_icon
        //             img.ui.avatar.image(src="https://img.icons8.com/color/48/000000/#{color_icon}.png")
        //         else if icon
        //             i.icon(class=icon)
        //         if show_label
        //             |&nbsp;
        //             strong #{plural}
        each topnav_pages
            a.item(href="/t/#{ct.slug}/p/#{slug}" class="{{#if is_loading}}disabled{{/if}}")
                // if color_icon_header
                //     +ioffice name=color_icon
                if show_icon
                    i.icon(class=icon)
                if show_label
                    |&nbsp; #{title}
            if is_dev
                a.icon.item(href="/t/#{ct.slug}/s/page/#{_id}/edit" title='Edit Page')
                    i.pencil.icon

        // a.item.toggle_invert(href='#')
        //     i.adjust.icon
        // a.icon.item(href="/t/#{ct.slug}/chat" title='Chat')
        //     i.chat.icon
        //     |Chat
        // a.icon.item.tribe_schemas(href="/t/#{ct.slug}/s/schema")
        //     i.th.icon
        //     | Sections
        a.icon.item.tribe_people(href="/t/#{ct.slug}/s/person" title='People')
            i.users.icon
            |People
        // a.icon.item(href="/t/#{ct.slug}/menu")
        //     i.th.icon
        if currentUser
            a.icon.item(href="/t/#{ct.slug}/add" title="#{ct.title} Add")
                // +ioffice name='plus' classes='ui mini image'
                i.plus.icon
                |Add
            // a.item.toggle_topbar(href='#')
            //     +ioffice name='inbox' classes='ui mini image'
                // i.inbox.icon
            if is_dev
                a.item(href="/t/#{ct.slug}/u/#{currentUser._id}/about" title="#{ct.title} Profile")
                    // +ioffice name='gender-neutral-user' classes='ui mini image'
                    i.user.icon
                    // | #{currentUser.username} [#{currentUser.status}]
                    // | #{currentUser.username}
            // a.icon.item.toggle_rightbar(href='#')
            //     // +ioffice name='menu'
            //     i.bars.icon
        else
            a.item(href="/t/goldrun/login")
                i.sign.in.alternate.icon
                // +ioffice name='login-rounded-down'
                |Sign In 
            a.item(href="/t/goldrun/register")
                i.user.plus.icon
                // +ioffice name='add-user-male'
                |Register 
    // if is_admin
    // .ui.attached.borderless.inverted.menu.topnav(style="background:#{ct.primary_color};opacity:0.8")
    //     each topnav_schemas
    //         a.item.mobile_hidden.set_tribe_schema(href="/t/#{tribe}/s/#{slug}" class="{{isActiveRoute regex=slug}}" title=title)
    //             if color_icon
    //                 +ioffice name=color_icon
    //             else if icon
    //                 i.icon(class=icon)
    //             |&nbsp; #{plural}



// template(name='topbar')
//     .ui.top.sidebar.inverted.push.nav_bar.toggle_topbar.topbar(style="background:#{ct.primary_color}")
//         .ui.grid
//             .centered.row
//                 .four.wide.center.aligned.column
//                     .ui.inverted.list
//                         each nonprofit_pages
//                             a.item(href="/p/#{slug}") #{title}
//                 .four.wide.center.aligned.column
//                     .ui.inverted.list
//                         each church_pages
//                             a.item(href="/p/#{slug}") #{title}
//                 .four.wide.center.aligned.column
//                     .ui.inverted.list
//                         each also_serving_pages
//                             a.item(href="/p/#{slug}") #{title}
                            
//                 .four.wide.center.aligned.column
//                     .ui.inverted.list
//                         each resource_pages
//                             a.item(href="/p/#{slug}") #{title}
//         a.icon.item(href='/alerts' title='Alerts')



template(name='rightbar')
    .ui.right.vertical.sidebar.nav_bar.inverted.menu.rightbar(style="background:#{ct.primary_color}")
        // if is_church
        //     .profile-picture
        //         a(href="{{pathFor route='churchDashboard'}}" class="{{isActiveRoute 'churchDashboard'}}")
        //             if currentUser.profile.profilePic
        //                 img.img-circle.m-b(src='{{currentUser.profile.profilePic}}' alt='logo' width='100' height='79')
        //             else
        //                 img.img-circle.m-b(src='/icons/Logo_sm_100.png' alt='logo' width='100' height='79')
        // if is_admin
        //     .profile-picture
        //         a(href="{{pathFor route='adminDashboard'}}")
        //             if currentUser.profile.profilePic
        //                 img.img-circle.m-b(src='{{currentUser.profile.profilePic}}' alt='logo' width='100' height='79')
        //             else
        //                 img.img-circle.m-b(src='/icons/Logo_sm_100.png' alt='logo' width='100' height='79')
        
        // if is_user
        //     .profile-picture
        //         a(href="{{pathFor route='dashboard'}}")
        //             if currentUser.profile.profilePic
        //                 img.img-circle.m-b(src='{{currentUser.profile.profilePic}}' alt='logo' width='100' height='79')
        //             else
        //                 img.img-circle.m-b(src='/icons/Logo_sm_100.png' alt='logo' width='100' height='79')
        a.item(href="/t/#{ct.slug}/chat")
            // +ioffice name='chat' classes='ui avatar image'
            i.chat.icon
            | Chat
        a.item.toggle_rightbar.tribe_schemas(href="/t/#{ct.slug}/s/schema")
            // +ioffice name='active-directory' classes='ui avatar image'
            i.sitemap.icon
            | Schemas
        a.item.toggle_rightbar.tribe_pages(href="/t/#{ct.slug}/s/page")
            // +ioffice name='web' classes='ui avatar image'
            i.clone.icon
            | Pages
        a.item.toggle_rightbar(href="/t/#{ct.slug}/users")
            // +ioffice name='group-foreground-selected' classes='ui avatar image'
            i.users.icon
            | Users
        a.icon.item.toggle_rightbar(href="/t/#{ct.slug}/u/#{currentUser._id}/edit")
            // +ioffice name='settings-3' classes='ui avatar image'
            i.cog.icon
            | Account
        // .item.toggle_rightbar
        //     | #{currentUser.profile.first_name} #{currentUser.profile.last_name}
        //     | #{currentUser.username} #{currentUser.profile.name}
        //     i.grey.user.shield.icon(title='Role')
        //     each currentUser.roles
        //         .ui.basic.label #{this}
        // .item.toggle_rightbar
        //     i.leaderboard.icon
        //     | Leaderboard
        // a.item.toggle_rightbar(href='/account')
        //     if currentUser.username
        //         |#{currentUser.username}
        //     else
        //         |Account
        // a.item.toggle_rightbar(href="/u/#{currentUser._id}/about")
        //     i.user.icon
        //     | Profile
        if signing_out
            .icon.disabled.item.toggle_rightbar
                i.notched.circle.loading.big.icon
        else
            a.logout.item(href='#')
                // +ioffice name='exit-sign' classes='ui avatar image'
                i.sign.out.icon
                | Log Out






template(name='leftbar')
    .ui.left.vertical.sidebar.nav_bar.inverted.menu.leftbar(style="background:#{ct.primary_color}")
        // if is_dev
        //     a.item.toggle_leftbar.toggle_dev.mobile_hidden(href="#")
        //         i.user.shield.icon
        //         | Dev
        // a.item.toggle_leftbar(href="/people" class="{{isActiveRoute regex='people'}}" title='People')
        //     i.users.icon
        //     | People
        // a.item.toggle_leftbar(href="/churches" class="{{isActiveRoute regex='churches'}}" title='Churches')
        //     i.building.icon
        //     | Organizations
        // a.item.toggle_leftbar(href='/chat' title='Chat' class="{{isActiveRoute regex='chat'}}")
        //     i.chat.icon
        //     | Chat
            
        if currentUser
            a.item(href="/user/#{currentUser._id}/edit" class="{{isActiveRoute 'user_edit'}}")
                i.user.icon
                | My Account
                
            a.item#linkLogout(href='/logout')
                i.sign.out.icon
                | Logout
            
        each tribe_schemas
            a.item.set_schema.toggle_leftbar(href="/t/#{ct.slug}/s/#{slug}")
                i.icon(class=icon)
                | #{plural}




template(name='footer')
    // .ui.inverted.bottom.fixed.menu(style="background:#{ct.secondary_color}")
    //     .item
    //         i.copyright.outline.icon
    //     .item    
    //         |#{ct.footer}
    //     .right.menu
    #footer.ui.inverted.attached.segment(style="background:#{ct.secondary_color}")
        .ui.stackable.padded.grid
            .three.column.row
                .column
                    h5.ui.small.inverted.header Info
                    with ct.owner
                        h5.ui.small.inverted.header Owner Info
                        +user_info
                    .ui.list
                        if ct.address
                            .item
                                i.globe.icon
                                .content #{ct.address}             
                        if ct.contact_email
                            .item
                                i.mail.icon
                                a(href="mailto:#{ct.contact_email}") #{ct.contact_email}
                        if ct.contact_phone
                            .item
                                i.phone.icon
                                a(href="tel:#{ct.contact_phone}") #{ct.contact_phone}
                .column
                    .ui.small.inverted.header Links
                    .ui.inverted.list
                        each footer_pages
                            a.item(href="/t/#{ct.slug}/p/#{slug}") #{title}
                .inverted.column
                    +role_switcher

                    // h5.ui.small.inverted.header Social Media
                    // .ui.list
                    //     if ct.facebook
                    //         a.item(href="https://www.facebook.com/#{ct.facebook}", target='_blank')
                    //             img(src='/images/32x32x1.png', alt='32x32x1')
                    //     if ct.twitter
                    //         a.item(href='https://twitter.com/Joyful_Giver', target='_blank')
                    //             img(src='/images/32x32x2.png', alt='32x32x2')
                    //     if ct.instagram
                    //         a.item(href='https://www.instagram.com/joyfulgiver_app/', target='_blank')
                    //             img(src='/images/32x32x9.png', alt='32x32x9')
                //     .ui.small.images
                //         img(src='/images/stripe.png', alt='100x80x1')
                //         img(src='/images/ssl.png', alt='100x80x2')
                //         a(href='https://www.bbb.org/dallas/business-reviews/financial-services/joyful-giver-in-plano-tx-90907663#bbbseal', target='_blank')
                //             img(src='/images/bbb.png', alt='100x80x2')
            .centered.middle.aligned.row
                .four.wide.center.aligned.column
                    .ui.inline.inverted.header
                        i.copyright.outline.icon
                        |2019 
                        |#{ct.title}
                if is_dev
                    .four.wide.center.aligned.column
                        a(href='/t/dao')
                            +icolor name='yin-yang' classes='ui inline image'
