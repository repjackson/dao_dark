template(name='delta')    
    .ui.stackable.padded.grid
        .row
            .four.wide.column.scrolling
                if delta
                    .ui.large.transparent.input(title='Rename')
                        input.delta_title(type='text' value=delta.title)
                    .ui.icon.button.delete_delta
                        i.remove.link.icon
                        // | Delete
                    .ui.icon.button.print_delta
                        i.code.link.icon
                        // | Log
                    .ui.icon.button.recalc
                        i.refresh.link.icon
                        // | Refresh
                each delta.facets
                    unless hidden
                        +facet
                        div
            .twelve.wide.column
                if delta.editing
                    +edit
                else
                    +change_delta_key key='view' icon='list' label='List' value='list'
                    +change_delta_key key='view' icon='th' label='Grid' value='grid'
                    +change_delta_key key='view' icon='table' label='Table' value='grid'
                    +change_delta_key key='view' icon='map' label='Map' value='map'
                    +change_delta_key key='view' icon='calendar' label='Calendar' value='cal'
                div
                +Template.dynamic template=delta.view
                    


template(name='change_delta_key')
    .ui.button.set_delta_key(class=delta_key_button_class)
        if icon
            i.icon(class=icon)
        |#{label}