template(name='user_delta')
    with schema
        .ui.stackable.grid
            .row
                // .twelve.wide.column.padleft.scrolling(class=delta_left_column_class)
                .four.wide.column.padleft.scrolling
                    // a.ui.right.corner.label.move_left
                    //     i.left.chevron.link.icon
                    .ui.center.aligned.header
                        if color_icon
                            +icolor name=color_icon
                        else
                            i.icon(class=icon)
                        | #{plural}
                    // .ui.small.center.aligned.header #{body}
                    unless is_loading
                        if can_add
                            .ui.circular.button.add_type_doc(title="Add #{title}")
                                // i.plus.large.icon
                                +icolor name='plus' classes='ui avatar image'
                                |Add #{title}
                        if can_edit
                            +edit_button
                            // .ui.circular.button.edit_schema
                            //     i.cog.icon
                            //     | Configure #{plural}
                        // .ui.divider
                        // // each sessions
                        // //     .ui.icon.large.circular.button.select_session(class=session_selector_class title='select session')
                        // //         i.play.icon
                                
                        if current_delta
                            if is_dev
                                .ui.icon.button.print_delta(title='Print Session Doc')
                                    i.code.icon
                                    // |Print Session
                                .ui.reset.icon.button(title='Reload Session')
                                    i.refresh.icon
                                    // |Reload Session
                                .ui.delete_delta.icon.button(title='Delete Session')
                                    i.trash.icon
                                    // |Delete Session
                        else
                            .create_delta.ui.circular.basic.button.pointer(title='new session')
                                i.plus.icon
                                |Create Session
                    // |did: #{session_delta_id}
                            
                    each current_delta.facets
                        +facet
                // .column(class=delta_right_column_class)
                .twelve.wide.column
                    .scrolling
                        each current_delta.result_ids
                            +result
